# 智能作业管理系统使用说明书

## 1. 项目概述

### 1.1 项目名称
智能作业管理系统 (Intelligent Homework Management System)

### 1.2 版本号
V1.0.0

### 1.3 主要功能与用途
本系统致力于为学校提供现代化的作业管理解决方案，通过数字化手段简化作业布置、提交与批改流程。
主要功能包括：
- **学生端**：在线查看作业、拍照上传提交、实时查看AI审核结果。
- **教师端**：布置作业（支持自定义AI检测规则）、查看学生提交情况、处理异常作业、数据统计与导出。
- **管理端**：系统全局管理，包括教师账号管理、学生信息管理（支持批量导入）、作业与数据监控。
- **AI智能审核**：集成AI能力，自动识别作业真实性，减轻教师负担。

---

## 2. 使用说明

### 2.1 主界面功能说明

系统分为三个主要操作界面，分别对应三种用户角色：

1.  **学生端首页** (`/`)
    -   **功能**：显示当日需完成的作业列表。
    -   **界面元素**：学生姓名卡片、作业列表、状态指示灯（未交/已交/异常）、提交按钮。
2.  **教师端管理台** (`/teacher`)
    -   **功能**：作业布置与管理核心区域。
    -   **界面元素**：概览仪表盘（提交率统计）、作业发布区、作业列表、异常处理区。
3.  **管理端后台** (`/admin`)
    -   **功能**：基础数据维护。
    -   **界面元素**：教师管理、学生管理、作业管理、系统数据看板。

### 2.2 各模块操作流程

#### 2.2.1 管理员操作流程
**1. 登录系统**
- 访问地址：`http://服务器IP:端口/admin/login`
- 默认账号：`admin` / `admin123`

**2. 教师账号管理**
- **添加教师**：在“教师管理”标签页点击“+ 添加教师”，输入用户名、密码及所属学科（如“数学”）。
- **编辑/删除**：在教师列表中对现有账号进行修改或删除操作。

**3. 学生信息管理**
- **单个添加**：在“学生管理”标签页点击“+ 添加学生”，输入姓名和学号。
- **批量导入**：
    1. 点击“📁 批量导入”按钮。
    2. 下载或参考标准模板（`姓名,学号`两列）。
    3. 选择Excel文件上传，系统将自动完成导入。

#### 2.2.2 教师操作流程
**1. 登录系统**
- 访问地址：`http://服务器IP:端口/teacher/login`
- 使用管理员分配的账号登录。

**2. 布置作业**
- 在“布置作业”面板输入作业标题。
- **高级配置**（可选）：
    - 设置最大上传图片数（默认5张）。
    - **自定义AI Prompt**：输入针对该作业的特殊AI检测指令（例如：“检查是否包含几何作图”）。
- 点击“布置作业”发布。

**3. 作业管理与审核**
- **查看进度**：在作业列表中查看提交人数和比例。
- **处理异常**：系统会自动标记AI判定为“非作业”的提交。教师可点击“查看”人工复核，选择“通过”或“打回”。
- **导出数据**：支持将提交记录导出为Excel、CSV等格式。

#### 2.2.3 学生操作流程
**1. 访问系统**
- 访问首页 `http://服务器IP:端口/`，无需登录（基于IP或开放访问，具体视部署而定，本系统主要通过选择姓名进入）。

**2. 提交作业**
- 在列表中找到自己的名字。
- 点击对应学科作业的“提交”按钮。
- **上传图片**：点击相机图标拍照或选择本地图片（支持多图上传）。
- 点击“确认提交”。

**3. 查看状态**
- 提交后，状态会更新为“审核中”或“已完成”。
- 若显示“异常”，需点击“重新提交”并上传正确的作业图片。

### 2.3 快捷键列表
本系统为Web应用，主要依赖鼠标触控操作，支持以下通用浏览器快捷键：
- `Ctrl + F`：在页面内搜索学生姓名。
- `F5` / `Ctrl + R`：刷新页面获取最新作业状态。

### 2.4 常见操作示例

**示例1：批量导入学生名单**
1.  管理员登录后台。
2.  准备Excel文件 `students.xlsx`，第一列为“姓名”，第二列为“学号”。
3.  进入“学生管理” -> “批量导入” -> 选择文件 -> 确认。
4.  系统提示“成功导入 XX 名学生”。

**示例2：发布需AI严格检查的数学作业**
1.  教师登录后台。
2.  输入标题：“第三章 三角函数测验”。
3.  展开“高级配置”。
4.  在AI Prompt中输入：“请严格检查图片内容，必须包含三角函数计算过程，不能是纯文本或空白页。”
5.  点击发布。

---

## 3. 配置说明

系统配置文件位于项目根目录下的 `homework.ini`。

### 3.1 配置文件位置及参数说明

| 节 (Section) | 参数 (Key) | 默认值 | 说明 |
| :--- | :--- | :--- | :--- |
| **[settings]** | `enable_image_upload` | `true` | 是否开启图片上传功能 |
| | `max_images_per_homework` | `5` | 单次作业最大允许上传图片数 |
| | `allowed_image_formats` | `jpg,jpeg,png,gif` | 允许上传的文件扩展名 |
| | `max_image_size_mb` | `10` | 单张图片最大体积 (MB) |
| **[ai_review]** | `enable_ai_review` | `true` | 是否开启AI自动审核 |
| | `ai_api_url` | *(配置值)* | AI服务接口地址 |
| | `ai_model` | `gpt-4.1-mini` | 使用的AI模型名称 |
| | `ai_review_action` | `mark_abnormal` | AI审核失败后的动作 (reject/mark_abnormal) |

### 3.2 自定义设置方法
1.  使用文本编辑器（如Notepad++、VS Code）打开 `homework.ini`。
2.  修改对应参数的值。
3.  保存文件。
4.  **重启应用**使配置生效（关闭并重新运行 `start.bat` 或 `app.py`）。

---

## 4. 故障排除

### 4.1 常见问题及解决方案

**Q1: 学生提交作业时提示“上传失败”？**
- **原因**：图片体积超过限制或格式不支持。
- **解决**：检查图片是否超过10MB，确保是JPG/PNG格式。可在配置文件中调大 `max_image_size_mb`。

**Q2: AI审核一直显示“判定中”？**
- **原因**：AI接口响应慢或网络超时。
- **解决**：系统后台有定时任务每5分钟处理超时记录。如频繁发生，请检查服务器网络连接或AI API配置。

**Q3: 忘记管理员密码？**
- **解决**：需通过数据库工具访问 `instance/homework_system.db`，或联系技术支持重置数据库。

### 4.2 错误代码说明
- **HTTP 400**: 请求参数错误（如未填写必填项）。
- **HTTP 404**: 资源不存在（如作业已被删除）。
- **HTTP 500**: 服务器内部错误（请查看控制台报错日志）。

### 4.3 技术支持联系方式
- **项目维护者**: (请填写具体联系人)
- **邮箱**: (请填写联系邮箱)
- **GitHub Issues**: (如有开源仓库链接)

---

## 5. 附录

### 5.1 术语表
- **AI复核 (AI Review)**：指系统调用人工智能接口对学生上传的图片进行内容分析，判断是否为有效作业的过程。
- **异常作业**: 指被AI判定为不符合要求（如非手写、无关图片）的提交记录。

### 5.2 版本更新记录
- **2024-xx-xx V1.0.0**: 系统初始版本发布，包含基础的作业收发与AI审核功能。

### 5.3 相关资源链接
- **项目主页**: [链接地址]
- **API文档**: 详见 `README.md` 中的 API 文档部分。
